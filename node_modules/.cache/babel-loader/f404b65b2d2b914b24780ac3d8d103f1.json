{"ast":null,"code":"var _jsxFileName = \"/Users/lehoa/icetea/work/redkite/frontend-user/src/pages/BuyToken/LotteryWinners/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport useFetch from '../../../hooks/useFetch';\nimport { debounce } from 'lodash';\n/* import { CircularProgress } from '@material-ui/core'; */\n\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Pagination from '@material-ui/lab/Pagination';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport useStyles from './style';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst headers = ['No.', 'Address'];\n\nconst shortenAddress = (address, digits = 4) => {\n  return `${address.substring(0, digits + 2)}...${address.substring(42 - digits)}`;\n};\n\nconst LotteryWinners = props => {\n  _s();\n\n  const styles = useStyles();\n  const {\n    poolId,\n    userWinLottery,\n    maximumBuy,\n    purchasableCurrency,\n    verifiedEmail\n  } = props;\n  const [input, setInput] = useState(\"\");\n  const [searchedWinners, setSearchedWinners] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPage, setTotalPage] = useState(1);\n  const [totalWinners, setTotalWinners] = useState(0);\n  const {\n    data: winnersList\n  } = useFetch(`/user/winner-${!input ? 'list' : 'search'}/${poolId}?page=${currentPage}&limit=10&${input ? `search=${input}` : ''}`);\n\n  const searchDebounce = () => {\n    if (winnersList) {\n      setTotalPage(winnersList.lastPage);\n      setCurrentPage(winnersList.page);\n      setTotalWinners(winnersList.total);\n      setSearchedWinners(winnersList.data);\n    }\n  };\n\n  useEffect(searchDebounce, [winnersList]);\n  const handleInputChange = debounce(e => {\n    ReactDOM.unstable_batchedUpdates(() => {\n      setCurrentPage(1);\n      setInput(e.target.value);\n    });\n  }, 500);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.LotteryWinners,\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: styles.LotteryWinnersMessage,\n      style: {\n        marginTop: 15\n      },\n      children: [\"There are \", totalWinners || 0, \" winners. Please check your individual caps to see how much you can buy.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.tableSearchWrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"lottery-search\",\n        className: styles.tableSearch,\n        placeholder: \"Search for Wallet Address\",\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/images/search.svg\",\n        className: styles.tableSearchIcon,\n        alt: \"search-icon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n      component: Paper,\n      className: styles.tableContainer,\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        className: styles.table,\n        \"aria-label\": \"simple table\",\n        children: [/*#__PURE__*/_jsxDEV(TableHead, {\n          className: styles.tableHeaderWrapper,\n          children: /*#__PURE__*/_jsxDEV(TableRow, {\n            children: headers.map(header => /*#__PURE__*/_jsxDEV(TableCell, {\n              className: styles.tableHeader,\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: header\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 21\n              }, this)\n            }, header, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n          children: searchedWinners && searchedWinners.length > 0 && searchedWinners.map((row, index) => /*#__PURE__*/_jsxDEV(TableRow, {\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              component: \"th\",\n              scope: \"row\",\n              children: index + 1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              component: \"th\",\n              scope: \"row\",\n              children: isWidthDown('sm', props.width) ? /*#__PURE__*/_jsxDEV(Tooltip, {\n                title: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: row.wallet_address\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 37\n                }, this),\n                children: /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: shortenAddress(row.wallet_address)\n                }, void 0, false)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 21\n              }, this) : row.wallet_address\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this), searchedWinners && searchedWinners.length > 0 && /*#__PURE__*/_jsxDEV(Pagination, {\n      count: totalPage,\n      color: \"primary\",\n      style: {\n        marginTop: 30\n      },\n      className: styles.pagination,\n      onChange: (e, value) => setCurrentPage(value),\n      page: currentPage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n\n_s(LotteryWinners, \"IeGPTN17mjaqOhooikPFoVB//9Y=\", false, function () {\n  return [useStyles, useFetch];\n});\n\n_c = LotteryWinners;\nexport default withWidth()(LotteryWinners);\n\nvar _c;\n\n$RefreshReg$(_c, \"LotteryWinners\");","map":{"version":3,"sources":["/Users/lehoa/icetea/work/redkite/frontend-user/src/pages/BuyToken/LotteryWinners/index.tsx"],"names":["useState","useEffect","ReactDOM","useFetch","debounce","withWidth","isWidthDown","Tooltip","Pagination","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","useStyles","headers","shortenAddress","address","digits","substring","LotteryWinners","props","styles","poolId","userWinLottery","maximumBuy","purchasableCurrency","verifiedEmail","input","setInput","searchedWinners","setSearchedWinners","currentPage","setCurrentPage","totalPage","setTotalPage","totalWinners","setTotalWinners","data","winnersList","searchDebounce","lastPage","page","total","handleInputChange","e","unstable_batchedUpdates","target","value","LotteryWinnersMessage","marginTop","tableSearchWrapper","tableSearch","tableSearchIcon","tableContainer","table","tableHeaderWrapper","map","header","tableHeader","length","row","index","width","wallet_address","pagination"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport useFetch from '../../../hooks/useFetch';\nimport { numberWithCommas } from '../../../utils/formatNumber';\nimport { debounce } from 'lodash';\n/* import { CircularProgress } from '@material-ui/core'; */\nimport withWidth, {isWidthDown} from '@material-ui/core/withWidth';\n\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Pagination from '@material-ui/lab/Pagination';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport useStyles from './style';\n\nconst headers = ['No.', 'Address'];\n\ntype LotteryWinnersProps = {\n  poolId: number | undefined;\n  width: any;\n  userWinLottery: boolean | undefined;\n  maximumBuy: number | undefined;\n  purchasableCurrency: string | undefined;\n  verifiedEmail: boolean | undefined;\n}\n\nconst shortenAddress = (address: string, digits: number = 4) => {\n  return `${address.substring(0, digits + 2)}...${address.substring(42 - digits)}`\n}\n\nconst LotteryWinners: React.FC<LotteryWinnersProps> = (props: LotteryWinnersProps) => {\n  const styles = useStyles();\n  const { poolId, userWinLottery, maximumBuy, purchasableCurrency, verifiedEmail } = props;\n  const [input, setInput] = useState(\"\");\n  const [searchedWinners, setSearchedWinners] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPage, setTotalPage] = useState(1);\n  const [totalWinners, setTotalWinners] = useState(0);\n  const { data: winnersList } = useFetch<any>(`/user/winner-${!input ? 'list': 'search'}/${poolId}?page=${currentPage}&limit=10&${input ? `search=${input}`: ''}`);\n\n  const searchDebounce = () => {\n    if (winnersList) {\n      setTotalPage(winnersList.lastPage);\n      setCurrentPage(winnersList.page);\n      setTotalWinners(winnersList.total);\n      setSearchedWinners(winnersList.data);\n    }\n  };\n\n  useEffect(searchDebounce, [winnersList]);\n\n  const handleInputChange = debounce((e: any) => {\n    ReactDOM.unstable_batchedUpdates(() => {\n      setCurrentPage(1);\n      setInput(e.target.value);\n    });\n  }, 500);\n\n  return (\n    <div className={styles.LotteryWinners}>\n      <p className={styles.LotteryWinnersMessage} style={{ marginTop: 15 }}>There are {totalWinners || 0} winners. Please check your individual caps to see how much you can buy.</p>\n\n      {/*{*/}\n      {/*  searchedWinners.length > 0 && verifiedEmail && (*/}\n      {/*    userWinLottery ? (*/}\n      {/*      <p className={styles.LotteryWinnersMessage}> You have won the lottery! You can buy up to {numberWithCommas(`${maximumBuy}`)} {purchasableCurrency}.</p>*/}\n      {/*    ): (*/}\n      {/*      <p className={styles.LotteryWinnersMessage}>Unfortunately, you did not win a ticket to buy this time! See you next time.</p>*/}\n      {/*    )*/}\n      {/*  )}*/}\n\n      <div className={styles.tableSearchWrapper}>\n        <input\n          type=\"text\"\n          name=\"lottery-search\"\n          className={styles.tableSearch}\n          placeholder=\"Search for Wallet Address\"\n          onChange={handleInputChange}\n        />\n        <img src=\"/images/search.svg\" className={styles.tableSearchIcon} alt=\"search-icon\" />\n      </div>\n        <TableContainer component={Paper} className={styles.tableContainer}>\n          <Table className={styles.table} aria-label=\"simple table\">\n            <TableHead className={styles.tableHeaderWrapper}>\n              <TableRow>\n              {\n                headers.map(header => (\n                  <TableCell key={header} className={styles.tableHeader}>\n                    <span>\n                      {header}\n                    </span>\n                  </TableCell>\n                ))\n              }\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {searchedWinners && searchedWinners.length> 0 && searchedWinners.map((row: any, index) => (\n              <TableRow key={index}>\n                <TableCell component=\"th\" scope=\"row\">\n                  {index + 1}\n                </TableCell>\n                <TableCell component=\"th\" scope=\"row\">\n                  {isWidthDown('sm', props.width) ?\n                    <Tooltip title={<p>{row.wallet_address}</p>}>\n                      <>\n                        {shortenAddress(row.wallet_address)}\n                      </>\n                    </Tooltip>\n                    : row.wallet_address\n                  }\n                </TableCell>\n                </TableRow>\n            ))}\n              </TableBody>\n            </Table>\n        </TableContainer>\n      {\n        searchedWinners && searchedWinners.length> 0 && (\n          <Pagination\n            count={totalPage}\n            color=\"primary\"\n            style={{ marginTop: 30 }} className={styles.pagination}\n            onChange={(e: any, value: any) => setCurrentPage(value)}\n            page={currentPage}\n          />\n        )\n      }\n    </div>\n  )\n}\n\nexport default withWidth()(LotteryWinners);\n"]},"metadata":{},"sourceType":"module"}