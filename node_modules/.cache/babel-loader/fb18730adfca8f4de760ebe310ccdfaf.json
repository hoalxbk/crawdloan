{"ast":null,"code":"var _jsxFileName = \"/Users/lehoa/icetea/work/redkite/frontend-user/src/pages/AccountV2/Tiers/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport _ from 'lodash';\nimport { TIERS } from '../../../constants';\nimport useStyles from './style';\nimport useCommonStyle from '../../../styles/CommonStyle';\nimport { getUserTierAlias } from '../../../utils/getUserTierAlias';\nimport useAuth from '../../../hooks/useAuth';\nimport withWidth, { isWidthDown, isWidthUp } from '@material-ui/core/withWidth';\nimport { getTiers, getUserInfo, getUserTier } from '../../../store/actions/sota-tiers';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { numberWithCommas } from '../../../utils/formatNumber';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst noticeIcon = '/images/icons/notice.svg';\n\nconst Tiers = props => {\n  _s();\n\n  const styles = useStyles();\n  const commonStyle = useCommonStyle();\n  const dispatch = useDispatch();\n  const {\n    data: tiers = {}\n  } = useSelector(state => state.tiers);\n  const {\n    data: userInfo = {}\n  } = useSelector(state => state.userInfo);\n  const [loading, setLoading] = useState(true);\n  const {\n    isAuth,\n    connectedAccount,\n    wrongChain\n  } = useAuth();\n  const {\n    data: rates\n  } = useSelector(state => state.rates);\n  const {\n    showMoreInfomation = false,\n    tiersBuyLimit,\n    tokenSymbol,\n    verifiedEmail,\n    userTier = 0,\n    total,\n    hideStatistics\n  } = props;\n  const [currentProcess, setCurrentProcess] = useState(undefined);\n  useEffect(() => {\n    console.log(userTier, 'userTier');\n  }, [userTier]);\n\n  const calculateProcess = (ListData, current) => {\n    let tierA = 0;\n    let tierB = 0;\n    let overTier = true;\n\n    for (let i = 0; i < ListData.length; i++) {\n      if (ListData[i] > parseFloat(current) && overTier) {\n        if (i == 0) {\n          tierA = 0;\n          tierB = ListData[0];\n        } else {\n          tierA = ListData[i - 1];\n          tierB = ListData[i];\n        }\n\n        overTier = false;\n      }\n    }\n\n    if (overTier) {\n      return 100;\n    }\n\n    let process = (parseFloat(current) - tierA) * 100 / (tierB - tierA);\n    if (process > 100) process = 100;\n    return process;\n  };\n\n  useEffect(() => {\n    if (!_.isEmpty(tiers)) {\n      setLoading(false);\n    }\n\n    if (wrongChain || !isAuth || !connectedAccount) {\n      setCurrentProcess(0);\n      return;\n    }\n\n    if (showMoreInfomation && userTier) {\n      // let process = userTier*100/(tiersBuyLimit.length - 1)\n      setCurrentProcess(0);\n      return;\n    }\n\n    if (!showMoreInfomation && total) {\n      let process = calculateProcess(tiers, total);\n      setCurrentProcess(process);\n    }\n  }, [tiers, userTier, userInfo, tiersBuyLimit, showMoreInfomation, tokenSymbol, connectedAccount, isAuth, wrongChain, total]);\n  useEffect(() => {\n    dispatch(getTiers());\n    connectedAccount != '' && connectedAccount != undefined && dispatch(getUserInfo(connectedAccount));\n    connectedAccount != '' && connectedAccount != undefined && dispatch(getUserTier(connectedAccount));\n  }, [isAuth, wrongChain, connectedAccount]);\n  useEffect(() => {\n    if (currentProcess != undefined) setLoading(false);\n    console.log('userTier', userTier);\n  }, [currentProcess, userTier]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: this.styles.tierComponent + (!loading ? ' active' : ' inactive') + (showMoreInfomation ? ' bg-none' : ''),\n    children: [showMoreInfomation && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: this.styles.title,\n      children: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: verifiedEmail && connectedAccount ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [userTier > 0 ? `You are in tier ${getUserTierAlias(userTier).text}` : 'You are not in any tier yet', \". To upgrade your tier, please click \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/account\",\n            className: this.styles.tierLinkToAccount,\n            children: \"here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 162\n          }, this), \".\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"You are not in any tier yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 15\n        }, this)\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 30\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: this.styles.tierList,\n      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n        className: `${this.styles.tierInfo} active first-tier`,\n        children: [isWidthUp('sm', props.width) && connectedAccount && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"progress-bar\",\n          style: {\n            backgroundColor: TIERS[0].bgColor,\n            width: userTier > 0 ? 'calc(100% - 1px)' : `${currentProcess || 0}%`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 64\n        }, this), isWidthDown('xs', props.width) && connectedAccount && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"progress-bar\" + (loading ? ' inactive' : ' active'),\n          style: {\n            backgroundColor: TIERS[0].bgColor,\n            height: userTier > 0 ? 'calc(100% - 1px)' : `${currentProcess || 0}%`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 66\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"icon\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: TIERS[0].bg,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: TIERS[0].icon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"tier-name\",\n              children: TIERS[0].name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"tier-name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), tiers.length > 0 && tiers.map((tier, idx) => {\n        if (tier != 0) {\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            className: this.styles.tierInfo + (userTier > idx ? ' active ' : ' ') + TIERS[idx + 1].name + (hideStatistics ? ' hide-statistics' : ''),\n            children: [userTier > idx + 1 && connectedAccount && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"progress-bar\" + (loading ? ' inactive' : ' active'),\n              style: {\n                backgroundColor: TIERS[idx + 1].bgColor,\n                transition: `all 1s ease ${idx + 1}s`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 58\n            }, this), userTier == idx + 1 && connectedAccount && !showMoreInfomation && isWidthUp('sm', props.width) && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"progress-bar\" + (loading ? ' inactive' : ' active'),\n              style: {\n                backgroundColor: TIERS[idx + 1].bgColor,\n                width: `${currentProcess}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 114\n            }, this), userTier == idx + 1 && connectedAccount && !showMoreInfomation && isWidthDown('xs', props.width) && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"progress-bar\" + (loading ? ' inactive' : ' active'),\n              style: {\n                backgroundColor: TIERS[idx + 1].bgColor,\n                height: `${currentProcess}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 116\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"icon\",\n                style: hideStatistics && {\n                  marginTop: -30\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: TIERS[idx + 1].bg,\n                  alt: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: TIERS[idx + 1].icon\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"tier-name\",\n                  children: TIERS[idx + 1].name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 19\n                }, this), !showMoreInfomation && /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [numberWithCommas(tier), \" \", tokenSymbol]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 44\n                }, this), showMoreInfomation && !hideStatistics && /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [numberWithCommas(tiersBuyLimit[idx + 1]), \" \", tokenSymbol]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 62\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 15\n            }, this)]\n          }, tier, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 20\n          }, this);\n        }\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), !showMoreInfomation && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: this.styles.tierNote,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"title\",\n        children: [\"Equivalent PKF\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(Tooltip, {\n          placement: \"top-start\",\n          classes: {\n            tooltip: commonStyle.tooltip\n          },\n          enterDelay: 500,\n          leaveDelay: 200,\n          title: /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              font: 'normal normal normal 12px/18px Helvetica'\n            },\n            children: [\"Equivalent PKF = PKF\", rates.data && rates.data.map(rate => {\n              return ` + ${rate.symbol}*${rate.rate}`;\n            }), \"+ sPKF (Cooldown)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 126\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: noticeIcon\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"subtitle\",\n        children: [connectedAccount && isAuth && !wrongChain ? numberWithCommas(total || 0) : 0, \" PKF\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"notice\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: TIERS[userTier].icon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notice-content\",\n          children: [userTier > 0 && connectedAccount ? /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"You are in Tier \", TIERS[userTier].name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 51\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"You are not in any tier yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 105\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Please stake tokens in your wallet balance to maintain your tier!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 31\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Tiers, \"C1vdJ5sfMBQyuoyUBxpTg8VMou8=\", false, function () {\n  return [useStyles, useCommonStyle, useDispatch, useSelector, useSelector, useAuth, useSelector];\n});\n\n_c = Tiers;\nexport default withWidth()(Tiers);\n\nvar _c;\n\n$RefreshReg$(_c, \"Tiers\");","map":{"version":3,"sources":["/Users/lehoa/icetea/work/redkite/frontend-user/src/pages/AccountV2/Tiers/index.tsx"],"names":["useEffect","useState","useSelector","useDispatch","Link","_","TIERS","useStyles","useCommonStyle","getUserTierAlias","useAuth","withWidth","isWidthDown","isWidthUp","getTiers","getUserInfo","getUserTier","Tooltip","numberWithCommas","noticeIcon","Tiers","props","styles","commonStyle","dispatch","data","tiers","state","userInfo","loading","setLoading","isAuth","connectedAccount","wrongChain","rates","showMoreInfomation","tiersBuyLimit","tokenSymbol","verifiedEmail","userTier","total","hideStatistics","currentProcess","setCurrentProcess","undefined","console","log","calculateProcess","ListData","current","tierA","tierB","overTier","i","length","parseFloat","process","isEmpty","tierComponent","title","text","tierLinkToAccount","tierList","tierInfo","width","backgroundColor","bgColor","height","bg","icon","name","map","tier","idx","transition","marginTop","tierNote","tooltip","font","rate","symbol"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport _ from 'lodash';\nimport { CONVERSION_RATE, TIERS } from '../../../constants';\nimport useStyles from './style';\nimport useCommonStyle from '../../../styles/CommonStyle';\nimport { getUserTierAlias } from '../../../utils/getUserTierAlias';\nimport useAuth from '../../../hooks/useAuth';\nimport withWidth, {isWidthDown, isWidthUp} from '@material-ui/core/withWidth';\nimport { getTiers, getUserInfo, getUserTier } from '../../../store/actions/sota-tiers';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { numberWithCommas } from '../../../utils/formatNumber';\n\nconst noticeIcon = '/images/icons/notice.svg';\n\nconst Tiers = (props: any) => {\n  const styles = useStyles();\n  const commonStyle = useCommonStyle();\n  const dispatch = useDispatch();\n\n  const { data: tiers = {} } = useSelector((state: any) => state.tiers);\n  const { data: userInfo = {} } = useSelector((state: any) => state.userInfo);\n  const [loading, setLoading] = useState(true);\n  const { isAuth, connectedAccount, wrongChain } = useAuth();\n  const {data: rates} = useSelector((state: any) => state.rates);\n\n  const {\n    showMoreInfomation = false,\n    tiersBuyLimit,\n    tokenSymbol,\n    verifiedEmail,\n    userTier = 0,\n    total,\n    hideStatistics\n  } = props;\n\n  const [currentProcess, setCurrentProcess] = useState(undefined) as any;\n\n  useEffect(() => {\n    console.log(userTier, 'userTier')\n  }, [userTier])\n\n  const calculateProcess = (ListData: any, current: any) => {\n    let tierA = 0;\n    let tierB = 0;\n    let overTier = true;\n    for(let i = 0; i < ListData.length; i++) {\n      if(ListData[i] > parseFloat(current) && overTier) {\n        if(i == 0) {\n          tierA = 0;\n          tierB = ListData[0];\n        } else {\n          tierA = ListData[i - 1];\n          tierB = ListData[i];\n        }\n        overTier = false;\n      }\n    }\n    if(overTier) {\n      return 100;\n    }\n    let process = (parseFloat(current) - tierA) * 100 /((tierB - tierA))\n    if(process > 100) process = 100\n    return process;\n  }\n\n  useEffect(() => {\n    if(!_.isEmpty(tiers)) {\n      setLoading(false);\n    }\n    if(wrongChain || !isAuth || !connectedAccount){\n      setCurrentProcess(0)\n      return\n    }\n    if(showMoreInfomation && userTier) {\n      // let process = userTier*100/(tiersBuyLimit.length - 1)\n      setCurrentProcess(0);\n      return;\n    }\n    if(!showMoreInfomation && total) {\n      let process = calculateProcess(tiers, total);\n      setCurrentProcess(process);\n    }\n  }, [tiers, userTier, userInfo, tiersBuyLimit, showMoreInfomation, tokenSymbol, connectedAccount, isAuth, wrongChain, total])\n\n  useEffect(() => {\n    dispatch(getTiers());\n    connectedAccount != '' && connectedAccount != undefined && dispatch(getUserInfo(connectedAccount));\n    connectedAccount != '' && connectedAccount != undefined && dispatch(getUserTier(connectedAccount));\n  }, [isAuth, wrongChain, connectedAccount])\n\n  useEffect(() => {\n    if(currentProcess != undefined) setLoading(false)\n    console.log('userTier', userTier)\n  }, [currentProcess,userTier])\n\n  return (\n    <div\n      className={this.styles.tierComponent + (!loading ? ' active' : ' inactive') + (showMoreInfomation ? ' bg-none' : '')}\n    >\n      {showMoreInfomation && <div className={this.styles.title}>\n        <>\n          {\n            (verifiedEmail && connectedAccount) ?  (\n              <p>\n              {userTier > 0 ? `You are in tier ${getUserTierAlias(userTier as number).text}`: 'You are not in any tier yet'}. To upgrade your tier, please click <Link to=\"/account\" className={this.styles.tierLinkToAccount}>here</Link>.\n              </p>\n            ): (\n              <p>\n                You are not in any tier yet.\n              </p>\n            )\n          }\n        </>\n      </div>}\n      <ul className={this.styles.tierList}>\n        <li className={`${this.styles.tierInfo} active first-tier`}>\n          {isWidthUp('sm', props.width) && connectedAccount && <span\n            className={\"progress-bar\"}\n            style={{\n              backgroundColor: TIERS[0].bgColor,\n              width: userTier > 0 ?  'calc(100% - 1px)' : `${currentProcess || 0}%`\n            }}\n          ></span>}\n          {isWidthDown('xs', props.width) && connectedAccount && <span\n            className={\"progress-bar\" + (loading ? ' inactive' : ' active')}\n            style={{\n              backgroundColor: TIERS[0].bgColor,\n              height: userTier > 0 ?  'calc(100% - 1px)' : `${currentProcess || 0}%`\n            }}\n          ></span>}\n          <div>\n            <div className=\"icon\">\n              <img src={TIERS[0].bg} alt=\"\"/>\n              <img src={TIERS[0].icon} />\n            </div>\n            <div className=\"info\">\n              <span className=\"tier-name\">{TIERS[0].name}</span>\n              <span className=\"tier-name\"></span>\n            </div>\n          </div>\n        </li>\n        {tiers.length > 0 && tiers.map((tier: any, idx: any) => {\n          if(tier != 0) {\n            return <li key={tier} className={this.styles.tierInfo + (userTier > idx ? ' active ' : ' ') + TIERS[idx + 1].name +  (hideStatistics ? ' hide-statistics': '')}>\n              {userTier > idx + 1 && connectedAccount && <span\n                className={\"progress-bar\" + (loading ? ' inactive' : ' active')}\n                style={{\n                  backgroundColor: TIERS[idx + 1].bgColor,\n                  transition: `all 1s ease ${idx + 1}s`\n                }}\n              ></span>}\n              {userTier == idx + 1 && connectedAccount && !showMoreInfomation && isWidthUp('sm', props.width) && <span\n                className={\"progress-bar\" + (loading ? ' inactive' : ' active')}\n                style={{\n                  backgroundColor: TIERS[idx + 1].bgColor,\n                  width: `${currentProcess}%`\n                }}\n              ></span>}\n              {userTier == idx + 1 && connectedAccount && !showMoreInfomation && isWidthDown('xs', props.width) && <span\n                className={\"progress-bar\" + (loading ? ' inactive' : ' active')}\n                style={{\n                  backgroundColor: TIERS[idx + 1].bgColor,\n                  height: `${currentProcess}%`\n                }}\n              ></span>}\n              <div>\n                <div className=\"icon\" style={hideStatistics && { marginTop: -30 }}>\n                  <img src={TIERS[idx + 1].bg} alt=\"\"/>\n                  <img src={TIERS[idx + 1].icon} />\n                </div>\n                <div className=\"info\">\n                  <span className=\"tier-name\">{TIERS[idx + 1].name}</span>\n                  { !showMoreInfomation && <span>{numberWithCommas(tier)} {tokenSymbol}</span> }\n                  { showMoreInfomation && !hideStatistics && <span>{numberWithCommas(tiersBuyLimit[idx + 1])} {tokenSymbol}</span> }\n                </div>\n              </div>\n            </li>\n          }\n        })}\n      </ul>\n\n      {!showMoreInfomation && <div className={this.styles.tierNote}>\n        <h3 className=\"title\">\n          Equivalent PKF&nbsp;&nbsp;\n          <Tooltip placement=\"top-start\" classes={{ tooltip: commonStyle.tooltip }} enterDelay={500} leaveDelay={200} title={<p style={{ font: 'normal normal normal 12px/18px Helvetica' }}>\n            Equivalent PKF = PKF\n            {rates.data && rates.data.map((rate: any) => {\n              return ` + ${rate.symbol}*${rate.rate}`\n            })}\n            + sPKF (Cooldown)\n          </p>}>\n            <img src={noticeIcon}/>\n          </Tooltip>\n        </h3>\n        <span className=\"subtitle\">{(connectedAccount && isAuth && !wrongChain) ? numberWithCommas(total || 0) : 0} PKF</span>\n        <div className=\"notice\">\n          <img src={TIERS[userTier].icon}/>\n          <div className=\"notice-content\">\n            {(userTier > 0 && connectedAccount) ? <span>You are in Tier {TIERS[userTier].name}</span> : <span>You are not in any tier yet.</span>}\n            <span>Please stake tokens in your wallet balance to maintain your tier!</span>\n          </div>\n        </div>\n      </div>}\n    </div>\n  );\n};\n\nexport default withWidth()(Tiers);\n"]},"metadata":{},"sourceType":"module"}