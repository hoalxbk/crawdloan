{"ast":null,"code":"var _jsxFileName = \"/Users/lehoa/icetea/work/redkite/frontend-user/src/pages/JoinPolkaSmith/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport { debounce } from 'lodash';\nimport DefaultLayout from '../../components/Layout/DefaultLayout';\nimport useStyles from './style';\nimport useCommonStyle from '../../styles/CommonStyle';\nimport Pool from './Pool';\nimport withWidth, { isWidthDown, isWidthUp } from '@material-ui/core/withWidth';\nimport useFetch from '../../hooks/useFetch';\nimport useAuth from '../../hooks/useAuth';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { getPoolStatusByPoolDetail } from \"../../utils/getPoolStatusByPoolDetail\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst iconSearch = 'images/icons/search.svg';\n\nconst Pools = props => {\n  _s();\n\n  const styles = useStyles();\n  const commonStyle = useCommonStyle();\n  const {\n    data: appChain\n  } = useSelector(state => state.appNetwork);\n  const {\n    data: connector\n  } = useSelector(state => state.connector);\n  const [tabActive, setTabActive] = useState(1);\n  const [input, setInput] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPage, setTotalPage] = useState(1);\n  const [pools, setPools] = useState([]);\n  const {\n    connectedAccount\n  } = useAuth();\n\n  const getPoolsPrefixUri = () => {\n    let uri = '/pools';\n\n    if (tabActive === 1) {\n      return uri;\n    }\n\n    if (tabActive === 2) {\n      return `${uri}/top-pools`;\n    }\n\n    if (tabActive === 3) {\n      return `${uri}/user/${connectedAccount}/joined-pools`;\n    }\n  };\n\n  const {\n    data: poolsList,\n    loading: loadingGetPool\n  } = useFetch(`${getPoolsPrefixUri()}?page=${currentPage}&limit=10&title=${input}`);\n  console.log('poolsList: ', poolsList);\n  const handleInputChange = debounce(e => {\n    Promise.resolve().then(() => {\n      setInput(e.target.value);\n      setCurrentPage(1);\n    });\n  }, 500); // const getTokenSold = async (pool: any) => {\n  //   let result = '0';\n  //   try {\n  //     const networkAvailable = pool.network_available || pool.networkAvailable;\n  //     const poolHash = pool.campaign_hash || pool.campaignHash;\n  //     const contract = getPoolContract({ networkAvailable, poolHash });\n  //     if (contract) {\n  //       result = await contract.methods.tokenSold().call();\n  //       result = convertFromWei(result.toString());\n  //     }\n  //   } catch (error) {\n  //     console.log(error);\n  //   }\n  //   return result;\n  // }\n\n  useEffect(() => {\n    const manipulatePoolsData = async () => {\n      setTotalPage(poolsList.lastPage);\n      setCurrentPage(poolsList.page);\n      let listData = poolsList.data;\n      let poolWithStatus = [];\n\n      for (let i = 0; i < listData.length; i++) {\n        const pool = listData[i];\n        const status = await getPoolStatusByPoolDetail(pool, 0);\n        console.log('Pool STATUS:', status);\n        poolWithStatus.push({ ...pool,\n          status\n        });\n      }\n\n      poolsList.data = poolWithStatus;\n      listData = poolWithStatus; // if(!appChain || !connector) return;\n      // await Promise.all(listData.map(async (pool: any) => {\n      //   if (pool.is_deploy === 0) return;\n      //   const tokenSold = await getTokenSold(pool);\n      //   pool.tokenSold = tokenSold;\n      // }));\n\n      setPools(listData);\n    };\n\n    poolsList && poolsList.data && manipulatePoolsData();\n  }, [poolsList, appChain, connector]);\n\n  const handleChangeTab = tab => {\n    setTabActive(tab);\n  };\n\n  return /*#__PURE__*/_jsxDEV(DefaultLayout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.poolsContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.tabs,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: styles.btnTab + (tabActive === 1 ? ' active ' : ' ') + commonStyle.nnb1418d,\n          onClick: () => handleChangeTab(1),\n          children: \"All Pools\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: styles.btnTab + (tabActive === 2 ? ' active ' : ' ') + commonStyle.nnb1418d,\n          onClick: () => handleChangeTab(2),\n          children: \"Top Pools\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: styles.btnTab + (tabActive === 3 ? ' active ' : ' ') + commonStyle.nnb1418d,\n          onClick: () => handleChangeTab(3),\n          children: \"Pools Joined\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.tabContent,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"List Pools\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.searchGroup,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Search by Pool name\",\n            className: commonStyle.nnn1424h,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: iconSearch\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          style: {\n            width: '100%'\n          },\n          className: styles.listPools,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: styles.poolsHead,\n            children: [isWidthUp('md', props.width) && /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                style: {\n                  minWidth: '240px',\n                  width: '24%'\n                },\n                children: \"Pool Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: {\n                  minWidth: '120px',\n                  width: '12%'\n                },\n                children: \"Ratio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: {\n                  minWidth: '120px',\n                  width: '12%'\n                },\n                children: \"Access\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: {\n                  minWidth: '400px',\n                  width: '40%'\n                },\n                children: \"Progress\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: {\n                  minWidth: '120px',\n                  width: '12%'\n                },\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 48\n            }, this), isWidthDown('sm', props.width) && /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                style: {\n                  minWidth: '150px',\n                  width: '50%'\n                },\n                children: \"Pool Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: {\n                  minWidth: '90px',\n                  width: '30%'\n                },\n                children: \"Progress\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: {\n                  minWidth: '60px',\n                  width: '20%'\n                },\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 50\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: styles.poolsBody + (pools.length <= 0 ? ' loading' : ''),\n            children: pools.length > 0 && pools.map((pool, index) => {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: /*#__PURE__*/_jsxDEV(Pool, {\n                  pool: pool\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 40\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 24\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.pagination,\n          children: totalPage > 1 && /*#__PURE__*/_jsxDEV(Pagination, {\n            count: totalPage,\n            color: \"primary\",\n            style: {\n              marginTop: 30\n            },\n            className: styles.pagination,\n            onChange: (e, value) => {\n              if (!loadingGetPool) {\n                setCurrentPage(value);\n              }\n            },\n            page: currentPage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 32\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Pools, \"ildwrzNsU8aoTZipUPRgewWUD+4=\", false, function () {\n  return [useStyles, useCommonStyle, useSelector, useSelector, useAuth, useFetch];\n});\n\n_c = Pools;\nexport default withWidth()(withRouter(Pools));\n\nvar _c;\n\n$RefreshReg$(_c, \"Pools\");","map":{"version":3,"sources":["/Users/lehoa/icetea/work/redkite/frontend-user/src/pages/JoinPolkaSmith/index.tsx"],"names":["useEffect","useState","useSelector","withRouter","debounce","DefaultLayout","useStyles","useCommonStyle","Pool","withWidth","isWidthDown","isWidthUp","useFetch","useAuth","Pagination","getPoolStatusByPoolDetail","iconSearch","Pools","props","styles","commonStyle","data","appChain","state","appNetwork","connector","tabActive","setTabActive","input","setInput","currentPage","setCurrentPage","totalPage","setTotalPage","pools","setPools","connectedAccount","getPoolsPrefixUri","uri","poolsList","loading","loadingGetPool","console","log","handleInputChange","e","Promise","resolve","then","target","value","manipulatePoolsData","lastPage","page","listData","poolWithStatus","i","length","pool","status","push","handleChangeTab","tab","poolsContainer","tabs","btnTab","nnb1418d","tabContent","searchGroup","nnn1424h","width","listPools","poolsHead","minWidth","poolsBody","map","index","pagination","marginTop"],"mappings":"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","sourcesContent":["import {useEffect, useState} from 'react';\nimport {useSelector} from 'react-redux';\nimport {withRouter} from 'react-router-dom';\nimport {debounce} from 'lodash';\nimport DefaultLayout from '../../components/Layout/DefaultLayout';\nimport useStyles from './style';\nimport useCommonStyle from '../../styles/CommonStyle';\nimport {convertFromWei, getContractInstance, getContractInstanceWeb3, getPoolContract} from '../../services/web3';\nimport POOL_ABI from '../../abi/Pool.json';\nimport Pool from './Pool';\nimport withWidth, {isWidthDown, isWidthUp} from '@material-ui/core/withWidth';\nimport useFetch from '../../hooks/useFetch';\nimport useAuth from '../../hooks/useAuth';\n\nimport Pagination from '@material-ui/lab/Pagination';\nimport {getPoolStatusByPoolDetail} from \"../../utils/getPoolStatusByPoolDetail\";\nimport {NETWORK_AVAILABLE, NFT_PLUS_AMOUNT_PRODUCTION} from \"../../constants\";\nimport BigNumber from 'bignumber.js';\nimport {getProgressWithPools} from \"../../utils/campaign\";\n\nconst iconSearch = 'images/icons/search.svg';\n\nconst Pools = (props: any) => {\n  const styles = useStyles();\n  const commonStyle = useCommonStyle();\n  const { data: appChain } = useSelector((state: any) => state.appNetwork);\n  const { data: connector } = useSelector((state: any) => state.connector);\n\n  const [tabActive, setTabActive] = useState(1);\n  const [input, setInput] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPage, setTotalPage] = useState(1);\n  const [pools, setPools] = useState([]);\n\n  const { connectedAccount } = useAuth();\n\n  const getPoolsPrefixUri = () => {\n    let uri = '/pools'\n    if (tabActive === 1) {\n      return uri;\n    }\n\n    if (tabActive === 2) {\n      return `${uri}/top-pools`;\n    }\n\n    if (tabActive === 3) {\n      return `${uri}/user/${connectedAccount}/joined-pools`;\n    }\n  }\n\n  const { data: poolsList, loading: loadingGetPool } = useFetch<any>(\n    `${getPoolsPrefixUri()}?page=${currentPage}&limit=10&title=${input}`\n  );\n\n  console.log('poolsList: ', poolsList);\n\n  const handleInputChange = debounce((e: any) => {\n    Promise.resolve().then(() => {\n      setInput(e.target.value);\n      setCurrentPage(1);\n    });\n  }, 500);\n\n  // const getTokenSold = async (pool: any) => {\n  //   let result = '0';\n  //   try {\n  //     const networkAvailable = pool.network_available || pool.networkAvailable;\n  //     const poolHash = pool.campaign_hash || pool.campaignHash;\n  //     const contract = getPoolContract({ networkAvailable, poolHash });\n  //     if (contract) {\n  //       result = await contract.methods.tokenSold().call();\n  //       result = convertFromWei(result.toString());\n  //     }\n  //   } catch (error) {\n  //     console.log(error);\n  //   }\n  //   return result;\n  // }\n\n  useEffect(() => {\n    const manipulatePoolsData = async () => {\n      setTotalPage(poolsList.lastPage);\n      setCurrentPage(poolsList.page);\n\n      let listData = poolsList.data;\n      let poolWithStatus = [];\n      for (let i = 0; i < listData.length; i++) {\n        const pool = listData[i];\n        const status = await getPoolStatusByPoolDetail(pool, 0);\n        console.log('Pool STATUS:', status);\n\n        poolWithStatus.push({\n          ...pool,\n          status,\n        });\n      }\n\n      poolsList.data = poolWithStatus;\n      listData = poolWithStatus;\n\n      // if(!appChain || !connector) return;\n\n      // await Promise.all(listData.map(async (pool: any) => {\n      //   if (pool.is_deploy === 0) return;\n      //   const tokenSold = await getTokenSold(pool);\n      //   pool.tokenSold = tokenSold;\n      // }));\n\n      setPools(listData);\n    };\n\n    poolsList && poolsList.data && manipulatePoolsData();\n  }, [poolsList, appChain, connector]);\n\n  const handleChangeTab = (tab: number) => {\n    setTabActive(tab);\n  }\n\n  return (\n    <DefaultLayout>\n      <div className={styles.poolsContainer}>\n        <div className={styles.tabs}>\n          <span\n            className={styles.btnTab + (tabActive === 1 ? ' active ' : ' ') + commonStyle.nnb1418d}\n            onClick={() => handleChangeTab(1)}\n          >All Pools</span>\n          <span\n            className={styles.btnTab + (tabActive === 2 ? ' active ' : ' ') + commonStyle.nnb1418d}\n            onClick={() => handleChangeTab(2)}\n          >Top Pools</span>\n          <span\n            className={styles.btnTab + (tabActive === 3 ? ' active ' : ' ') + commonStyle.nnb1418d}\n            onClick={() => handleChangeTab(3)}\n          >Pools Joined</span>\n        </div>\n        <div className={styles.tabContent}>\n          <h2>List Pools</h2>\n          <div className={styles.searchGroup}>\n            <input\n              type=\"text\"\n              placeholder=\"Search by Pool name\"\n              className={commonStyle.nnn1424h}\n              onChange={handleInputChange}\n            />\n            <img src={iconSearch}/>\n          </div>\n          <table style={{ width: '100%' }} className={styles.listPools}>\n            <thead className={styles.poolsHead}>\n              {isWidthUp('md', props.width) && <tr>\n                <th style={{minWidth: '240px', width: '24%'}}>Pool Name</th>\n                <th style={{minWidth: '120px', width: '12%'}}>Ratio</th>\n                <th style={{minWidth: '120px', width: '12%'}}>Access</th>\n                <th style={{minWidth: '400px', width: '40%'}}>Progress</th>\n                <th style={{minWidth: '120px', width: '12%'}}>Status</th>\n              </tr>}\n              {isWidthDown('sm', props.width) && <tr>\n                <th style={{minWidth: '150px', width: '50%'}}>Pool Name</th>\n                <th style={{minWidth: '90px', width: '30%'}}>Progress</th>\n                <th style={{minWidth: '60px', width: '20%'}}>Status</th>\n              </tr>}\n            </thead>\n            <tbody className={styles.poolsBody + (pools.length <= 0 ? ' loading' : '')}>\n              {pools.length > 0 && pools.map((pool: any, index: number) => {\n                return <tr key={index}><Pool pool={pool}/></tr>\n              })}\n              {/* {pools.length <= 0 && <tr className=\"loading\"><td><CircularProgress size={80} /></td></tr>} */}\n            </tbody>\n            <tfoot>\n            </tfoot>\n          </table>\n          <div className={styles.pagination}>\n            {\n              totalPage > 1 && <Pagination\n                count={totalPage}\n                color=\"primary\"\n                style={{ marginTop: 30 }} className={styles.pagination}\n                onChange={(e: any, value: any) => {\n                  if (!loadingGetPool) {\n                    setCurrentPage(value)\n                  }\n                }}\n                page={currentPage}\n              />\n            }\n          </div>\n        </div>\n      </div>\n    </DefaultLayout>\n  );\n};\n\nexport default withWidth()(withRouter(Pools));\n"]},"metadata":{},"sourceType":"module"}